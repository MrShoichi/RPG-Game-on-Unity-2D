# RPG Game on Unity 2D
>Проект заключается в том, чтобы разработать игру жанра RPG(Role play game) на unity с 2D Top down пиксельной графикой.
Игра будет состоять из механик классических игр жанра RPG: прокачка персонажа, исследование, выполнение квестов, сюжет, боевая система, основанная на прокаченных навыках героя, а также крафт и торговля.
* Прокачка состоит из улучшения навыков героя и атрибутов. Атрибуты состоят из основных характеристик героя, таких как: сила, ловкость, устойчивость, скорость, удача, интеллект, обаяние, восприятие. Навыки - это способность героя взаимодействовать с миром, прокачивающиеся по мере прохождения. Например, навык одноручное оружие, повышает урон от одноручного оружия и позволяет прокачивать перки. Перки - это способности, доющие возможности к прохождению, связанные с навыком.
* Выполнение квестов, как и сюжет, связаны с прохождением жизненного пути героя, его взаимодествием с игровым миров и нпс. К примеру, можно зайти в таверну и взять квест на зачистку ущелья от монстров или спасению пропавшего человека.
* Исследование заключается в поиске локаций, зачистке подземелий, руин, развалин, лагерей, баз бандитов и т.д. Например, странствуя по открытому миру, герой может наткнуться на подземелья или развалины.
* Боевая система будет состоять из навыков боя:одноручным оружием, двуручным оружием, магией, рукопашным боем, дальнобойным оружием. Урон будет делиться на магический и физический. Магический урон в свою очередь будет делиться на: урон огнем, холодом, электричеством, землей, тьмой, светом, ядом, проклятием. Некоторая магия не приписывает к себе особый урон, например магия воздуха скоре режет и сбивает с ног, а магия земли чаще всего бъет грубой силой, его можно отнести к дробящему урону. Также есть магия призыва, урон от которой зависит от призванного существа. Физический урон делиться на: колющий, ружущий и дробящий. У разных противников слабая сопротивляемость к определенным типам урона.


## Подключения сриптов C++ к Unity

1. В _Visual Studio_(На данный момент 2019) создать проект "Библиотека динамической компоновки" ![image](https://user-images.githubusercontent.com/75163895/115126740-222d1980-9fda-11eb-9748-3ae7999f2f77.png)

2. Правой кнопкой нажать на _"Исходные файлы">Добавить>Создать элемент>Файл C++"_
![image](https://user-images.githubusercontent.com/75163895/115126751-3a049d80-9fda-11eb-97aa-29b59c7adaff.png)
![image](https://user-images.githubusercontent.com/75163895/115126761-4557c900-9fda-11eb-8b0f-4b47a1b36e91.png)
4. Также нажатием на файлы заголовков создать файл заголовка(.h)
![image](https://user-images.githubusercontent.com/75163895/115126766-50aaf480-9fda-11eb-8000-3098f41a90a6.png)
![image](https://user-images.githubusercontent.com/75163895/115126772-56083f00-9fda-11eb-95dc-6851eca0fc2c.png)

6. В новый файл C++ внести нужные функции, а также _include "pch.h"_
8. В файл заголовка добавить:
```C++
#ifndef FIRSTDLL_NATIVE_LIB_H
#define FIRSTDLL_NATIVE_LIB_H

#define DLLExport __declspec(dllexport)

extern "C"
{
    DLLExport тип_функции название_функции(...);
    ...
    DLLExport тип_функции название_функции(...);
}
#endif
```
6. В _pch.h_ добавить свой файл заголовка: include  "название_файла_заголовка.h"
7. Выбрать Realese x64 перед сборкой и нажать Сборка>Собрать решение.
![image](https://user-images.githubusercontent.com/75163895/115126786-789a5800-9fda-11eb-9d95-d96658f0fcd9.png)

9. Перенести из папки C:\Users\имя\source\repos\Название_проекта\x64\Release .dll в папку проекта Unity
10. В Unity создаем новый скрипт, в нем пишем:
```C++
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using System.Runtime.InteropServices;


public class Название_Скрипта : MonoBehaviour
{
    // Start is called before the first frame update
    [DllImport("Название_DLL")]
    public static extern тип_функции название_функции(...);
    ...
    [DllImport("Название_DLL")]
    public static extern тип_функции название_функции(...);


    void Start()
    {
        Debug.Log(название_функции(...)); //Выведет в Console Unity возвращаемое значение(Нужно для проверки работоспособности)
    
    }

    // Update is called once per frame
    void Update()
    {
       
    }
}
```

Почти такая же инструкция, только с картинками, есть на stackoverlow: https://stackoverflow.com/questions/49793560/build-c-plugin-for-unity
